import React from 'react';
import {motion} from 'framer-motion';
import SafeIcon from '../../common/SafeIcon';
import LocationBadge from '../../common/LocationBadge';
import * as FiIcons from 'react-icons/fi';

const {FiPackage,FiDollarSign,FiCalendar,FiEdit,FiTrash2,FiEye,FiCheckCircle,FiAlertCircle}=FiIcons;

const EquipmentCard=({equipment,onEdit,onDelete,onView,onBook,showActions=true,userRole='customer'})=> {
  const getConditionColor=(condition)=> {switch (condition) {case 'New': return 'bg-green-100 text-green-700';case 'Good': return 'bg-blue-100 text-blue-700';case 'Used': return 'bg-yellow-100 text-yellow-700';default: return 'bg-gray-100 text-gray-700';}};

  const getConditionIcon=(condition)=> {switch (condition) {case 'New': case 'Good': return FiCheckCircle;case 'Used': return FiAlertCircle;default: return FiPackage;}};
  
  const formatCondition=(condition)=> {switch (condition) {case 'New': return 'New';case 'Good': return 'Good (Fully Functional)';case 'Used': return 'Used (Normal Wear)';default: return condition;}};

  return ( <motion.div initial={{opacity: 0,y: 20}} animate={{opacity: 1,y: 0}} className="bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow duration-300" > {/* Image */} <div className="relative h-48 bg-gray-100"> {equipment.image_urls && equipment.image_urls.length > 0 ? ( <img src={equipment.image_urls[0]} alt={equipment.name} className="w-full h-full object-cover" onError={(e)=> {e.target.style.display='none';e.target.nextSibling.style.display='flex';}} /> ) : null} <div className={`${equipment.image_urls && equipment.image_urls.length > 0 ? 'hidden' : 'flex'} absolute inset-0 items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100`}> <div className="text-center"> <SafeIcon icon={FiPackage} className="text-blue-600 text-4xl mb-2" /> <div className="text-gray-600 font-medium">{equipment.name}</div> </div> </div> {/* Location Badge */} <div className="absolute top-4 left-4 z-10"> <LocationBadge availability={equipment.availability} /> </div> {/* Status badges */} <div className="absolute top-4 right-4 flex flex-col gap-2"> <span className={`px-3 py-1 rounded-full text-sm font-medium ${getConditionColor(equipment.current_condition)}`}> <SafeIcon icon={getConditionIcon(equipment.current_condition)} className="inline mr-1" /> {formatCondition(equipment.current_condition)} </span> {!equipment.availability_status && ( <span className="px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700"> Unavailable </span> )} </div> {/* Price badge */} <div className="absolute bottom-4 left-4"> <span className="bg-white px-3 py-1 rounded-full text-sm font-semibold text-gray-900 shadow-lg"> ${equipment.rental_price_per_day}/day </span> </div> </div> {/* Content */} <div className="p-6"> {/* Header */} <div className="mb-4"> <h3 className="text-xl font-bold text-gray-900 mb-2">{equipment.name}</h3> <p className="text-gray-600 text-sm">{equipment.category}</p> {equipment.description && ( <p className="text-gray-600 text-sm mt-2 line-clamp-2">{equipment.description}</p> )} </div> {/* Pricing Info */} <div className="mb-4 p-3 bg-gray-50 rounded-lg"> <div className="flex items-center justify-between"> <div className="flex items-center"> <SafeIcon icon={FiDollarSign} className="text-green-600 mr-2" /> <span className="text-lg font-semibold text-gray-900"> ${equipment.rental_price_per_day}/day </span> </div> {equipment.deposit_amount > 0 && ( <div className="text-sm text-gray-600"> Deposit: ${equipment.deposit_amount} </div> )} </div> </div> {/* Specifications */} {equipment.specifications && ( <div className="mb-4"> <h4 className="text-sm font-medium text-gray-700 mb-2">Specifications</h4> <div className="text-sm text-gray-600 space-y-1"> {Object.entries(equipment.specifications).map(([key,value])=> ( <div key={key} className="flex justify-between"> <span className="capitalize">{key.replace('_',' ')}:</span> <span>{value}</span> </div> ))} </div> </div> )} {/* Actions */} {showActions && ( <div className="flex justify-between items-center"> <div className="text-xs text-gray-500"> Updated: {new Date(equipment.updated_at).toLocaleDateString()} </div> <div className="flex space-x-2"> {userRole==='customer' && equipment.availability_status && ( <motion.button whileHover={{scale: 1.05}} whileTap={{scale: 0.95}} onClick={()=> onBook(equipment)} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-1" > <SafeIcon icon={FiCalendar} /> <span>Book Now</span> </motion.button> )} {(userRole==='organization' || userRole==='team_member') && ( <> <button onClick={()=> onView(equipment)} className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors" title="View details"> <SafeIcon icon={FiEye} /> </button> <button onClick={()=> onEdit(equipment)} className="p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors" title="Edit equipment"> <SafeIcon icon={FiEdit} /> </button> {userRole==='organization' && ( <button onClick={()=> onDelete(equipment)} className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors" title="Delete equipment"> <SafeIcon icon={FiTrash2} /> </button> )} </> )} {!showActions && ( <button onClick={()=> onView(equipment)} className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors" title="View details"> <SafeIcon icon={FiEye} /> </button> )} </div> </div> )} </div> </motion.div> );
};

export default EquipmentCard;